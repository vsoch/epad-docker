version: '2'

services:

    dicomproxy:
        image: srcc/epad:data

    mysql:
        image: rubinlab/mysql
        container_name: mysql
        environment: 
          - "MYSQL_ROOT_PASSWORD=epad"
        volumes_from:
          - dicomproxy
        depends_on:
          - dicomproxy

    dcm4chee:
        image: srcc/epad:dcm4chee
        container_name: dcm4chee
        ports:
          - "9080:9080"
          - "11112:11112"
        volumes_from:
          - dicomproxy
        links:
          - mysql
        depends_on:
          - mysql
          - dicomproxy

    exist:
        image: rubinlab/exist
        container_name: exist
        ports:
        - "8899:8899"
        depends_on:
          - mysql

    epad:
        image: srcc/epad:epad
        container_name: epad_web
        links:
          - dcm4chee
          - mysql:mysql_host
          - exist
        ports:
          - "8080:8080"
        volumes_from:
          - dicomproxy
        depends_on:
          - dicomproxy
          - dcm4chee
          - mysql
          - exist
